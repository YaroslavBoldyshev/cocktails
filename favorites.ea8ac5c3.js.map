{"mappings":"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","sources":["src/JS/searchFavorite.js"],"sourcesContent":["import refs from './refs';\nimport cocktailMarkup from './cocktailMarkup';\nimport Plagination from './plagination';\nimport { listenLearnMoreBtns } from './learnMoreBtns';\nimport favIngredMarkup from './favIngredientsMarkup';\nimport Storage from './storage';\nimport { createIngredientDetails } from './learnMoreBtns';\nimport ingredientModalMarkup from './ingredientModalMarkup';\nimport FetchDrinks from './fetchDrinks';\n\nconst plagination = new Plagination();\nconst fetchDrinks = new FetchDrinks();\nconst storage = new Storage();\nrefs.form.forEach(e => e.addEventListener('submit', handleSubmit));\n// refs.modalAddIngredient.addEventListener('click', addIngredientModal);\nlet page = localStorage.getItem('page');\nlet res;\n// let ingredientModalName;\nfunction handleSubmit(e) {\n  e.preventDefault();\n  refs.burger.classList.add('visually-hidden');\n  refs.favCocktailsList.innerHTML = '';\n  refs.favIngredientsList.innerHTML = '';\n  let serchResult;\n  if (page == 'cocktails') {\n    const cocktailsStorege = localStorage.getItem('cocktails');\n    arr = JSON.parse(cocktailsStorege);\n    serchResult = arr.filter(el =>\n      el.strDrink.includes(e.currentTarget.elements.searchInput.value)\n    );\n    res = serchResult;\n  } else if (page == 'ingredients') {\n    const cocktailsStorege = localStorage.getItem('ingredients');\n    arr = JSON.parse(cocktailsStorege);\n    serchResult = arr.filter(el =>\n      el.strIngredient.includes(e.currentTarget.elements.searchInput.value)\n    );\n    res = serchResult;\n  }\n  // ===============err/res============\n\n  if (serchResult.length == 0) {\n    if (page == 'cocktails') {\n      refs.favCocktailsErr.classList.remove('visually-hidden');\n    } else {\n      refs.favIngredientsErr.classList.remove('visually-hidden');\n    }\n  } else {\n    if (page == 'cocktails') {\n      refs.favCocktailsErr.classList.add('visually-hidden');\n    } else {\n      refs.favIngredientsErr.classList.add('visually-hidden');\n    }\n    if (page == 'cocktails') {\n      showSearchResults(serchResult);\n    } else {\n      showsearchedIngredients(serchResult);\n    }\n  }\n}\nfunction showSearchResults(serchResult) {\n  serchResult.map((el, index) => {\n    refs.favCocktailsList.insertAdjacentHTML('beforeend', cocktailMarkup(el));\n    // ------- adding icon----\n    const useHtml = refs.iconHeart.innerHTML;\n    const favDrink = document.querySelector(`[id=\"${el.idDrink}\"]`);\n    favDrink.addEventListener('click', addDrink);\n    listenLearnMoreBtns(el);\n    const svg = favDrink.children[1];\n    svg.innerHTML = useHtml;\n\n    // ----------------------\n  });\n}\nfunction addDrink(e) {\n  toggleActive(e);\n  storage.toggleDrink(e.currentTarget.id);\n}\nfunction toggleActive(e) {\n  if (e.currentTarget.children[0].textContent === 'Add to') {\n    e.currentTarget.children[0].textContent = 'Remove';\n  } else {\n    e.currentTarget.children[0].textContent = 'Add to';\n  }\n  e.currentTarget.children[1].classList.toggle('icon-heart-not-active');\n}\nfunction showsearchedIngredients(serchResult) {\n  refs.favIngredientsList.innerHTML = '';\n  const numberOfItems = plagination.itemsPerPage();\n\n  if (serchResult.length > 9) {\n    createPlaginationList(serchResult.length);\n    refs.plagination.classList.remove('visually-hidden');\n  }\n  serchResult.map((el, index) => {\n    if (\n      index >= (plagination.currentPage - 1) * numberOfItems &&\n      index < plagination.currentPage * numberOfItems\n    ) {\n      refs.favIngredientsList.insertAdjacentHTML(\n        'beforeend',\n        favIngredMarkup(el)\n      );\n\n      const favIngred = document.querySelector(`[id=\"${el.strIngredient}\"]`);\n      favIngred.addEventListener('click', addIngredient);\n      const useHtml = refs.iconHeart.innerHTML;\n\n      const svg = favIngred.children[1];\n      svg.innerHTML = useHtml;\n      // ingredientDetailsBtn(el);\n      const ingredientDetailsBtns = document.querySelector(\n        `[id=\"${1 + el.strIngredient}\"]`\n      );\n\n      ingredientDetailsBtns.addEventListener('click', showModalIngregients);\n    }\n  });\n}\nfunction addIngredient(e) {\n  if (e.currentTarget.children[0].textContent == 'Add to') {\n    e.currentTarget.children[0].textContent = 'Remove';\n  } else {\n    e.currentTarget.children[0].textContent = 'Add to';\n  }\n  e.currentTarget.children[1].classList.toggle('icon-heart-not-active');\n  storage.toggleIngredient(e.currentTarget.id);\n}\n\nasync function showModalIngregients(e) {\n  modalId = e.currentTarget.id.slice(1);\n  localStorage.setItem('favIngredientmodalId', modalId);\n  refs.ingredientMOdal.classList.remove('visually-hidden');\n  if (storage.isIngredientInStorage(modalId)) {\n    refs.modalAddIngredient.children[0].textContent = 'Remove from favorite';\n  } else {\n    refs.modalAddIngredient.children[0].textContent = 'Add to favorite';\n  }\n  const ingred = await fetchDrinks.ingredient(modalId);\n  const ingredientDetails = createIngredientDetails(ingred);\n  refs.ingredientMOdalContent.innerHTML = ingredientModalMarkup(\n    ingred,\n    ingredientDetails\n  );\n}\nfunction addIngredientModal1(e) {\n  if (e.target.textContent === 'Add to favorite') {\n    e.target.textContent = 'Remove from favorite';\n  } else {\n    e.target.textContent = 'Add to favorite';\n  }\n  storage.toggleIngredient(modalId);\n}\n"],"names":["$8Obb9","parcelRequire","$d745e0a63488d256$var$plagination","$2wGo8","default","$d745e0a63488d256$var$fetchDrinks","$9vN2i","$d745e0a63488d256$var$storage","$1W6ce","form","forEach","e","addEventListener","$d745e0a63488d256$var$handleSubmit","$d745e0a63488d256$var$res","$d745e0a63488d256$var$page","localStorage","getItem","serchResult","preventDefault","burger","classList","add","favCocktailsList","innerHTML","favIngredientsList","cocktailsStorege","arr","JSON","parse","filter","el","strDrink","includes","currentTarget","elements","searchInput","value","strIngredient","length","favCocktailsErr","remove","favIngredientsErr","map","index","insertAdjacentHTML","$6ZrOe","useHtml","iconHeart","favDrink","document","querySelector","idDrink","$d745e0a63488d256$var$addDrink","$byv5z","listenLearnMoreBtns","children","$d745e0a63488d256$var$showSearchResults","numberOfItems","itemsPerPage","createPlaginationList","plagination","currentPage","$8qp6o","favIngred","$d745e0a63488d256$var$addIngredient","$d745e0a63488d256$var$showModalIngregients","$d745e0a63488d256$var$showsearchedIngredients","textContent","toggle","$d745e0a63488d256$var$toggleActive","toggleDrink","id","toggleIngredient","async","modalId","slice","setItem","ingredientMOdal","isIngredientInStorage","modalAddIngredient","ingred","ingredient","ingredientDetails","createIngredientDetails","ingredientMOdalContent","$kEQa9"],"version":3,"file":"favorites.ea8ac5c3.js.map"}